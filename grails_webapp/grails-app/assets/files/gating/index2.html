<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gating Example</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="assets/dc.css"/>
  <link rel="stylesheet" type="text/css" href="assets/foundation.css"/>
  <link rel="stylesheet" type="text/css" href="assets/app.css"/>
  <link rel="stylesheet" type="text/css" href="assets/d3-context-menu.css"/>
  <style>
    .dc-chart .brush rect.selection{
      fill: #ac2925;
      fill-opacity: .125;
    }
    x-axis-label, y-axis-label {
      font-size: small;
    }

    .background{
      fill: #eeeeee;
      z-index: -99;
    }
  </style>

  <!--<script type="text/javascript" src="assets/jquery-2.2.0.min.js"></script>-->

</head>
<body>
<!--<div class="container">-->
  <div id="RenameNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" style="display:none; opacity: 1; visibility: hidden; top: 30px;">
    <!--<h2 id="modalTitle">Rename Node</h2>-->
    <h2 class="modalTitle">Rename Node</h2>
    <form id="RenameNodeForm">
      <div class="row">
        <div class="large-12 columns">
          <label>Node name
            <input type="text" class="inputName" id='RenameNodeName' placeholder="node name" />
            <input type="text" class="inputName" id='RenameNodeXM' placeholder="Marker name x-axis" />
            <input type="text" class="inputName" id='RenameNodeYM' placeholder="Marker name y-axis" />
            <input type="text" class="inputName" id='RenameNodePop' placeholder="pop no" />
          </label>
        </div>
      </div>
      <div class="row">
        <div class="large-8 columns">
          &nbsp;
        </div>
        <div class="large-4 columns">
          <!--<a href="#" class="button info" onclick="close_rename_node_modal()">Cancel</a>-->
          <a href="#" class="button info" onclick="$('#RenameNodeModal').hide();">Cancel</a>
          <a href="#" class="button success" onclick="rename_node()">Rename</a>
        </div>
      </div>
    </form>
    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
  </div>

  <div id="CreateNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" style="display:none; opacity: 1; visibility: hidden; top: 30px;">
    <!--<h2 id="modalTitle">Create Node</h2>-->
    <h2 class="modalTitle">Create Node</h2>
    <form id="CreateNodeForm">
      <div class="row">
        <div class="large-12 columns">
          <label>Node name
            <input type="text" class="inputName" id='CreateNodeName' placeholder="node name" />
            <input type="text" class="inputName" id='CreateNodeXM' placeholder="Marker name x-axis" />
            <input type="text" class="inputName" id='CreateNodeYM' placeholder="Marker name y-axis" />
            <input type="text" class="inputName" id='CreateNodePop' placeholder="pop no" />
          </label>
        </div>
      </div>
      <div class="row">
        <div class="large-8 columns">
          &nbsp;
        </div>
        <div class="large-4 columns">
          <!--<a href="#" class="button info" onclick="close_create_node_modal()">Cancel</a>-->
          <a href="#" class="button info" onclick="$('#CreateNodeModal').hide();">Cancel</a>
          <a href="#" class="button success" onclick="create_node()">Create</a>
        </div>
      </div>
    </form>
    <a class="close-reveal-modal" aria-label="Close">&#215;</a>
  </div>

  <div id="tree-container"></div>

  <!--<script src="assets/d3.v3517.min.js"></script>-->
  <script src="assets/d3.v3.min.js"></script>
  <script src="assets/dndTree.js"></script>
  <script src="assets/d3-context-menu2.js"></script>
  <script src="assets/underscore-min.js"></script>
  <script src="assets/jquery213.js"></script>
  <script src="assets/fastclick.js"></script>
  <script src="assets/foundation.min.js"></script>

  <div class="reveal-modal-bg" style="display: none;"></div>
  <script>
    // for the first initialization
    $('document').ready(function(){
      $(document).foundation();
      $(document).on('opened', '[data-reveal]', function () {
        var element = $(".inputName:visible").first();
        element.focus(function(){
          this.selectionStart = this.selectionEnd = this.value.length;
        });
        element.focus();
      });
      $('#RenameNodeForm').submit(function(e){
        rename_node();
        return false;
      });
      $('#CreateNodeForm').submit(function(e){
        create_node();
        return false;
      });
      var treeJSON = d3.json("assets/tree.json", draw_tree);
    });
  </script>




  <!--<div id="pops0"><h3>Onocytes</h3></div>-->
  <!--<div id="pops1" style="display: none"><h3>Monocytes</h3></div>-->
  <!--<div id="pops1"><h3>Monocytes</h3></div>-->
  <!--<div id="pops2"><h3>Bcell</h3></div>-->
  <!--<div id="pops3"><h3>NK, CD3+ NKT cells, T cell</h3></div>-->
  <!--<div id="pops4"><h3>CD4 Tcell, CD8 Tcell</h3></div>-->
  <!--<div id="pops5"><h3>Treg</h3></div>-->

  <!--<script type="text/javascript" src="assets/jquery-2.2.0.min.js"></script>-->
  <!--<script type="text/javascript" src="assets/d3.v540.js"></script>-->
  <!--<script type="text/javascript" src="assets/crossfilter.v62.js"></script>-->
  <!--<script type="text/javascript" src="assets/dc.v308.js"></script>-->
  <!--<script type="text/javascript" src="assets/plots2d.js"></script>-->


<!--</div>-->
</body>
</html>
