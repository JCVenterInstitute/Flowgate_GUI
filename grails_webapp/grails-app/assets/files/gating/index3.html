<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="assets/foundation.css" />
  <link rel="stylesheet" href="assets/app.css" />
  <link rel="stylesheet" href="assets/d3-context-menu.css" />
</head>
<body>
<div id="RenameNodeModal" class="reveal-modal" data-reveal aria-labelledby="RenameNodeForm" aria-hidden="true" role="dialog" style="display:none; opacity: 1; visibility: hidden; top: 30px;">
  <h2 class="modalTitle">Rename Node</h2>
  <form id="RenameNodeForm">
    <div class="row">
      <div class="large-12 columns">
        <label>Node name
          <input type="text" class="inputName" id='RenameNodeName' placeholder="node name" />
          <input type="text" class="inputName" id='RenameNodeXM' placeholder="Marker name x-axis" />
          <input type="text" class="inputName" id='RenameNodeYM' placeholder="Marker name y-axis" />
          <input type="text" class="inputName" id='RenameNodePop' placeholder="pop no" />
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-8 columns">
        &nbsp;
      </div>
      <div class="large-4 columns">
        <!--<a href="#" class="button info" onclick="close_rename_node_modal()">Cancel</a>-->
        <a href="#" class="button info" onclick="$(document).foundation('reveal', 'close');">Cancel</a>
        <a href="#" class="button success" onclick="rename_node()">Rename</a>
      </div>
    </div>
  </form>
  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

<div id="CreateNodeModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog" style="display:none; opacity: 1; visibility: hidden; top: 304px;">
  <h2 class="modalTitle">Create Node</h2>
  <form id="CreateNodeForm">
    <div class="row">
      <div class="large-12 columns">
        <label>Node name
          <input type="text" class="inputName" id='CreateNodeName' placeholder="node name" />
          <input type="text" class="inputName" id='CreateNodeXM' placeholder="Marker name x-axis" />
          <input type="text" class="inputName" id='CreateNodeYM' placeholder="Marker name y-axis" />
          <input type="text" class="inputName" id='CreateNodePop' placeholder="pop no" />
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-8 columns">
        &nbsp;
      </div>
      <div class="large-4 columns">
        <!--<a href="#" class="button info" onclick="close_create_node_modal()">Cancel</a>-->
        <a href="#" class="button info" onclick="$(document).foundation('reveal', 'close');">Cancel</a>
        <a href="#" class="button success" onclick="create_node()">Create</a>
      </div>
    </div>
  </form>
  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
</div>

<div id="tree-container"></div>

<script src="assets/d3.v3.min.js"></script>
<script src="assets/dndTree_v.js"></script>
<!--<script src="assets/d3-context-menu2.js"></script>-->
<script src="assets/d3-context-menu.js"></script>
<script src="assets/underscore-min.js"></script>
<script src="assets/jquery213.js"></script>
<script src="assets/fastclick.js"></script>
<script src="assets/foundation.min.js"></script>
<script>
  // for the first initialization
  $('document').ready(function(){
    $(document).foundation();
    $(document).on('opened', '[data-reveal]', function () {
      var element = $(".inputName:visible").first();
      element.focus(function(){
        this.selectionStart = this.selectionEnd = this.value.length;
      });
      element.focus();
    });
    $('#RenameNodeForm').submit(function(e){
      rename_node();
      return false;
    });
    $('#CreateNodeForm').submit(function(e){
      create_node();
      return false;
    });
    var treeJSON = d3.json("assets/tree.json", draw_tree);
  });
</script>
</body>
</html>
